(this["webpackJsonpecommerce-meli"]=this["webpackJsonpecommerce-meli"]||[]).push([[0],{42:function(e,t,o){},43:function(e,t,o){},44:function(e,t,o){},45:function(e,t,o){},57:function(e,t,o){},59:function(e,t,o){},60:function(e,t,o){},61:function(e,t,o){},62:function(e,t,o){},63:function(e,t,o){},64:function(e,t,o){},65:function(e,t,o){},67:function(e,t,o){"use strict";o.r(t);var n=o(2),a=o(33),c=o.n(a),s=(o(42),o(43),o(44),o(3)),i=o(17),r=o(6),l=(o(45),o(70)),m="en-us",d="es-co",h=o(34),u=o(0),j=function(e){var t=e.setLanguage,o=Object(h.a)();return Object(u.jsxs)("select",{className:"languageSelector btn btn-light form-select",onChange:function(e){t(e.target.value)},"data-bs-toggle":"dropdown",children:[Object(u.jsx)("option",{className:"dropdown-item",value:d,children:o.formatMessage({id:"spanish"})}),Object(u.jsx)("option",{className:"dropdown-item-text",selected:!0,value:m,children:o.formatMessage({id:"english"})})]})},b=function(e){var t=e.setLanguage;return Object(u.jsx)("nav",{className:"navbar navbar-expand-lg navbar-light bg-light",children:Object(u.jsxs)("div",{className:"container-fluid",children:[Object(u.jsx)(i.b,{className:"navbar-brand",to:"/",children:Object(u.jsx)(l.a,{id:"smart"})}),Object(u.jsx)("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNavAltMarkup","aria-controls":"navbarNavAltMarkup","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(u.jsx)("span",{className:"navbar-toggler-icon"})}),Object(u.jsx)("div",{className:"collapse navbar-collapse",id:"navbarNavAltMarkup",children:Object(u.jsxs)("div",{className:"navbar-nav",children:[Object(u.jsx)("div",{className:"navbar-nav-links",children:Object(u.jsx)(i.b,{className:"nav-link active","aria-current":"page",to:"/homes",children:Object(u.jsx)(l.a,{id:"spaces"})})}),Object(u.jsx)("div",{className:"navbar-nav-controls",children:Object(u.jsx)(j,{setLanguage:t})})]})})]})})},f=o(71),g=o(31),p=o(14),v=Object(p.a)({},m,{hello:"Hello",homes:"Homes",spaces:"My spaces",smart:"Smart Home",username:"Username",password:"Password",login:"Login",logout:"Logout",example:"You have {money} million",myRooms:"My rooms",stats:"Stats",noHomes:"No homes found",lofticon:"loft Icon",homeicon:"house Icon",spanish:"Spanish",english:"English",myrooms:"My rooms",roomicon:"Room icon",kitchenicon:"Kitchen icon",noRooms:"No rooms found",noRoomSelected:"No room selected",device:"Device",value:"Value",none:"None",powerusage:"Power usage (KwH) - Today"}),O=Object(p.a)({},d,{hello:"Hola",homes:"Casas",spaces:"Mis espacios",smart:"Smart Home",username:"Usuario",password:"Contrase\xf1a",login:"Entrar",logout:"Salir",example:"Tu tienes {money, plural, =0 { nada} one {# un mill\xf3n} other {# millones}}",myRooms:"Mis habitaciones",stats:"Estad\xedsticas",noHomes:"No hay hogares disponibles",lofticon:"\xcdcono de apartamento",homeicon:"\xcdcono de casa",spanish:"Espa\xf1ol",english:"Ingl\xe9s",myrooms:"Mis habitaciones",roomicon:"\xcdcono de habitaci\xf3n",kitchenicon:"\xcdcono de cocina",noRooms:"No hay habitaciones disponibles",noRoomSelected:"No se ha seleccionado ninguna habitaci\xf3n",device:"Dispositivo",value:"Valor",none:"Ninguno",powerusage:"Uso de energ\xeda (KwH) - Hoy"}),x=Object(g.a)(Object(g.a)({},v),O),y=(o(57),o(5)),N=o.n(y),w=o(32),k="/api/homes",S=function(){var e=Object(w.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(k).then(M));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=function(e){return e.json()},R=(o(59),o(60),function(e){var t=Object(h.a)();return Object(u.jsxs)("div",{className:"card card-home",children:[Object(u.jsx)(i.b,{className:"card-home-img-link",to:"/homes/".concat(e.home.id),children:"house"===e.home.type?Object(u.jsx)("img",{src:"/home.png",className:"card-home-img-top",alt:t.formatMessage({id:"homeicon"})}):Object(u.jsx)("img",{src:"/loft.png",className:"card-home-img-top loft",alt:t.formatMessage({id:"lofticon"})})}),Object(u.jsx)("div",{className:"card-home-body",children:Object(u.jsxs)("div",{className:"card-home-body-description",children:[Object(u.jsx)("h5",{className:"card-home-title",children:e.home.name}),Object(u.jsx)("p",{className:"card-home-text",children:e.home.address})]})})]})}),H=function(){var e=Object(n.useState)({homes:[]}),t=Object(s.a)(e,2),o=t[0],a=t[1];return Object(n.useEffect)((function(){navigator.onLine||(null===localStorage.getItem("homes")?a({homes:[]}):a({homes:localStorage.getItem("homes")}));fetch("http://localhost:3000/api/homes").then((function(e){return e.json()})).then((function(e){a({homes:e}),localStorage.setItem("homes",e)}))}),[]),Object(u.jsx)("div",{className:"Gallery",children:null==o.homes?Object(u.jsx)(l.a,{id:"noHomes"}):o.homes.filter((function(e){return e.isActive})).map((function(e){return Object(u.jsx)(R,{home:e},e.id)}))})},I=function(){var e=Object(n.useState)([]),t=Object(s.a)(e,2)[1];return Object(n.useEffect)((function(){S().then((function(e){return t(e)}))}),[]),Object(u.jsxs)("div",{className:"container home",children:[Object(u.jsx)("h1",{children:Object(u.jsx)(l.a,{id:"spaces"})}),Object(u.jsx)(H,{})]})},L=(o(61),o(62),o(63),function(e){var t=Object(h.a)();return Object(u.jsxs)("div",{className:"card room-card-home",children:[Object(u.jsx)("h3",{className:"card-home-title",children:e.room.name}),Object(u.jsx)(i.b,{className:"card-home-img-link",onClick:function(){e.clickRoom(e.room._id)},children:"room"===e.room.type?Object(u.jsx)("img",{src:"/living-room.png",className:"room-card-home-img-top room",alt:t.formatMessage({id:"roomicon"})}):Object(u.jsx)("img",{src:"/kitchen.png",className:"room-card-home-img-top kitchen",alt:t.formatMessage({id:"kitchenicon"})})})]})}),E=function(e){var t=function(t){e.clickRoom(t)};return Object(u.jsx)("div",{className:"Gallery col-lg-8 md-12 sm-12",children:null==e.rooms?Object(u.jsx)(l.a,{id:"noRooms"}):e.rooms.map((function(e){return Object(u.jsx)(L,{room:e,clickRoom:t},e.id)}))})},C=(o(64),function(e){var t=Object(h.a)();return Object(u.jsx)("div",{className:"roomDetail col-lg-4 md-12 sm-12",children:null==e.room?Object(u.jsx)("h5",{children:t.formatMessage({id:"noRoomSelected"})}):Object(u.jsxs)("table",{className:"table",children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{scope:"col",children:"#"}),Object(u.jsx)("th",{scope:"col",children:"ID"}),Object(u.jsx)("th",{scope:"col",children:t.formatMessage({id:"device"})}),Object(u.jsx)("th",{scope:"col",children:t.formatMessage({id:"value"})})]})}),Object(u.jsx)("tbody",{children:e.room[0].devices.map((function(e,o){return Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{scope:"row",children:o+1}),Object(u.jsx)("td",{children:e.id?e.id:t.formatMessage({id:"none"})}),Object(u.jsx)("td",{children:e.name}),Object(u.jsx)("td",{children:"string"===typeof e.desired.value?e.desired.value:JSON.stringify(e.desired.value)})]},e.id)}))})]})})}),A=(o(65),o(66)),W=function(e){return Object(n.useEffect)((function(){var t=A.select("#canvas"),o=[];if(null!=e.rooms){o=e.rooms.map((function(e){return{name:e.name,value:e.powerUsage.value}}));var n=t.append("svg").attr("width",400).attr("height",400).append("g").attr("transform","translate(200,200)"),a=A.scaleOrdinal().domain(o.map((function(e){return e.name}))).range(["#1dc0c6","#134e6f","#ffa821","#ff6250","#fc6453"]),c=A.pie().value((function(e){return e.value})),s=A.arc().innerRadius(0).outerRadius(Math.min(400,400)/2-1),i=c(o),r=A.select("#canvas").append("div").style("opacity",0).attr("class","tooltip").style("background-color","white").style("border","solid").style("border-width","2px").style("border-radius","5px").style("padding","5px");n.append("g").selectAll("path").data(i).enter().append("path").attr("fill",(function(e){return a(e.data.name)})).attr("d",s).on("mouseover",(function(e,t){r.style("opacity",1).html("".concat(t.data.name," : ").concat(t.data.value," KwH")),A.select(this).style("stroke","black").style("opacity",.8)})).on("mousemove",(function(e){r.style("left",A.pointer(e,A.select(this))[0]+30+"px").style("top",A.pointer(e,A.select(this))[1]-30+"px")})).on("mouseleave",(function(e){r.style("opacity",0),A.select(this).style("stroke","none").style("opacity",1)}))}}),[e.rooms]),Object(u.jsxs)("div",{className:"visualization",children:[Object(u.jsx)("h6",{children:Object(u.jsx)(l.a,{id:"powerusage"})}),Object(u.jsx)("div",{id:"canvas"})]})},T=function(){var e=Object(r.f)().id,t=Object(n.useState)({home:[]}),o=Object(s.a)(t,2),a=o[0],c=o[1],i=Object(n.useState)({room:[]}),m=Object(s.a)(i,2),d=m[0],h=m[1];Object(n.useEffect)((function(){navigator.onLine||(null===localStorage.getItem("".concat(e))?c({home:[]}):c({home:localStorage.getItem("".concat(e))}));var t="http://localhost:3000/api/homes/".concat(e);fetch(t).then((function(e){return e.json()})).then((function(t){c({home:t}),localStorage.setItem("".concat(e),t)}))}),[e]);return Object(u.jsxs)("div",{className:"container home",children:[Object(u.jsx)("h1",{children:Object(u.jsx)(l.a,{id:"myrooms"})}),Object(u.jsxs)("section",{className:"row",children:[Object(u.jsx)(E,{rooms:a.home.rooms,clickRoom:function(e){var t=a.home.rooms.filter((function(t){return t._id===e}));h({room:t})}}),Object(u.jsx)(C,{room:null==d.room||0===d.room.length?null:d.room})]}),Object(u.jsx)("h1",{children:Object(u.jsx)(l.a,{id:"stats"})}),Object(u.jsx)("section",{className:"row",id:"visualizationContainer",children:Object(u.jsx)(W,{rooms:a.home.rooms})})]})},U=function(){var e=Object(n.useState)(m),t=Object(s.a)(e,2),o=t[0],a=t[1];return Object(u.jsx)(f.a,{locale:o,messages:x[o],children:Object(u.jsxs)(i.a,{children:[Object(u.jsx)(b,{setLanguage:a}),Object(u.jsxs)(r.c,{children:[Object(u.jsx)(r.a,{exact:!0,path:"/",children:Object(u.jsx)(I,{})}),Object(u.jsx)(r.a,{exact:!0,path:"/homes",children:Object(u.jsx)(I,{})}),Object(u.jsx)(r.a,{exact:!0,path:"/homes/:id",children:Object(u.jsx)(T,{})})]})]})})};var P=function(){return Object(u.jsx)(u.Fragment,{children:Object(u.jsx)("main",{children:Object(u.jsx)(U,{})})})},D=function(e){e&&e instanceof Function&&o.e(3).then(o.bind(null,72)).then((function(t){var o=t.getCLS,n=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;o(e),n(e),a(e),c(e),s(e)}))},F=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function K(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var o=e.installing;null!=o&&(o.onstatechange=function(){"installed"===o.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}c.a.render(Object(u.jsx)(P,{}),document.getElementById("root")),D(),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");F?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(o){var n=o.headers.get("content-type");404===o.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):K(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):K(t,e)}))}}()}},[[67,1,2]]]);
//# sourceMappingURL=main.18222e1f.chunk.js.map